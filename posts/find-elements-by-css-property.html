<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="author" content="Thomas Prochazka"/><meta name="description" content="A little Software Engineering Blog by Thomas Prochazka, filled with posts regarding engineering problems and solutions"/><meta name="keywords" content="Software Engineer, Software Development, Blog, Web Development, Web Performance"/><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/><link rel="icon" href="/favicon.ico" type="image/x-icon"/><link rel="alternate" type="application/atom+xml" title="Software Engineering by Thomas Prochazka" href="/feed.xml"/><title>Find elements by css properties</title><meta property="og:title" content="Find elements by css properties"/><meta property="og:description" content="How to find all elements with a specific css property"/><meta property="og:image" content="https://www.gravatar.com/avatar/52a73317cd435a835d6cc927959f988c"/><meta property="og:url" content="https://www.tompka.io/posts/find-elements-by-css-property"/><meta name="twitter:card" content="summary"/><meta property="og:site_name" content="Software Engineering by Thomas Prochazka"/><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/08a3f96c2e086b76.css" as="style"/><link rel="stylesheet" href="/_next/static/css/08a3f96c2e086b76.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-fd82975a6094609f.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-c586b89e07064d4a.js" defer=""></script><script src="/_next/static/chunks/pages/_app-a73aab26615105d8.js" defer=""></script><script src="/_next/static/chunks/760-0804b77a7570748a.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-db250c55ac26d7aa.js" defer=""></script><script src="/_next/static/ipGrjwLbH_hDOF3cBijO5/_buildManifest.js" defer=""></script><script src="/_next/static/ipGrjwLbH_hDOF3cBijO5/_ssgManifest.js" defer=""></script><script src="/_next/static/ipGrjwLbH_hDOF3cBijO5/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><svg xmlns="http://www.w3.org/2000/svg" style="display:none"><symbol id="icon-linked" viewBox="0 0 16 16" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M13.632 13.635h-2.37V9.922c0-.886-.018-2.025-1.234-2.025-1.235 0-1.424.964-1.424 1.96v3.778h-2.37V6H8.51v1.04h.03c.318-.6 1.092-1.233 2.247-1.233 2.4 0 2.845 1.58 2.845 3.637v4.188zM3.558 4.955c-.762 0-1.376-.617-1.376-1.377 0-.758.614-1.375 1.376-1.375.76 0 1.376.617 1.376 1.375 0 .76-.617 1.377-1.376 1.377zm1.188 8.68H2.37V6h2.376v7.635zM14.816 0H1.18C.528 0 0 .516 0 1.153v13.694C0 15.484.528 16 1.18 16h13.635c.652 0 1.185-.516 1.185-1.153V1.153C16 .516 15.467 0 14.815 0z"></path></symbol><symbol id="icon-github" viewBox="0 0 24 24" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></symbol><symbol id="icon-twitter" viewBox="0 0 16 16" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M16 3.038c-.59.26-1.22.437-1.885.517.677-.407 1.198-1.05 1.443-1.816-.634.37-1.337.64-2.085.79-.598-.64-1.45-1.04-2.396-1.04-1.812 0-3.282 1.47-3.282 3.28 0 .26.03.51.085.75-2.728-.13-5.147-1.44-6.766-3.42C.83 2.58.67 3.14.67 3.75c0 1.14.58 2.143 1.46 2.732-.538-.017-1.045-.165-1.487-.41v.04c0 1.59 1.13 2.918 2.633 3.22-.276.074-.566.114-.865.114-.21 0-.41-.02-.61-.058.42 1.304 1.63 2.253 3.07 2.28-1.12.88-2.54 1.404-4.07 1.404-.26 0-.52-.015-.78-.045 1.46.93 3.18 1.474 5.04 1.474 6.04 0 9.34-5 9.34-9.33 0-.14 0-.28-.01-.42.64-.46 1.2-1.04 1.64-1.7z"></path></symbol><symbol id="icon-facebook" viewBox="0 0 16 16" fill-rule="evenodd"><path d="M10.28 14V9.35h1.56l.23-1.8h-1.79V6.38c0-.53.15-.89.9-.89h.96V3.88c-.17-.02-.74-.07-1.4-.07-1.38 0-2.33.85-2.33 2.4v1.33H6.85v1.81H8.4V14H2.66a.66.66 0 0 1-.66-.66V2.66c0-.36.3-.66.66-.66h10.68c.36 0 .66.3.66.66v10.68c0 .36-.3.66-.66.66h-3.06z"></path></symbol></svg><div class="o-page-wrapper"><nav class="c-menu"><ul class="c-menu__list"><li class="c-menu__list-item"><a class="c-menu__link" href="/">Posts</a></li><li class="c-menu__list-item"><a class="c-menu__link" href="/talks">Talks</a></li><li class="c-menu__list-item"><a class="c-menu__link" href="/about">About Me</a></li></ul></nav><main class="o-main"><article class="c-post" itemscope="" itemType="http://schema.org/BlogPosting"><header class="c-post__header"><time class="c-post__date" dateTime="2018-09-28T18:01:00.000Z" itemProp="datePublished">September 28, 2018</time><h1 class="c-post__title" itemProp="name headline">Find elements by css properties</h1></header><div class="c-post__content" itemProp="articleBody"><p>Today it like to share short <a href="https://gist.github.com/zlypher/0b9b295e2ee39da4125105e88d8d7d3e" target="_blank" rel="noreferrer noopener">code snippet</a> with you. You can use it to find all elements with a specific css property value. In my example, I want to find all elements with a custom <code>z-index</code>. So let&#x27;s jump right in. The snippet is pretty straight forward:</p>
<pre><code class="hljs language-js">(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> elems = <span class="hljs-title hljs-class">Array</span>.<span class="hljs-title hljs-function">from</span>(<span class="hljs-variable hljs-language">document</span>.<span class="hljs-title hljs-function">querySelectorAll</span>(<span class="hljs-string">&quot;*&quot;</span>))
        .<span class="hljs-title hljs-function">filter</span>(<span class="hljs-function"><span class="hljs-params">elem</span> =&gt;</span> <span class="hljs-variable hljs-language">window</span>.<span class="hljs-title hljs-function">getComputedStyle</span>(elem).<span class="hljs-property">zIndex</span> !== <span class="hljs-string">&quot;auto&quot;</span>)
        .<span class="hljs-title hljs-function">map</span>(<span class="hljs-function"><span class="hljs-params">elem</span> =&gt;</span> {
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">elem</span>: elem,
                <span class="hljs-attr">style</span>: <span class="hljs-variable hljs-language">window</span>.<span class="hljs-title hljs-function">getComputedStyle</span>(elem),
            };
        });
    <span class="hljs-variable hljs-language">console</span>.<span class="hljs-title hljs-function">table</span>(elems);
})();
</code></pre>
<h2>Explanation</h2>
<p>In the gist, you will find another variations with slightly different tradeoffs. For sake of brevity, we will only consider this one. So let&#x27;s step through it.</p>
<p>We create a new function with the nifty arrow syntax. This could easily be written as <code>(function() {</code> for older browser though.</p>
<pre><code class="hljs language-js">(<span class="hljs-function">() =&gt;</span> {
</code></pre>
<p>Next up we query all elements which match the <code>*</code> selector (hint: all of them). And create an array from the returned <code>NodeList</code>.</p>
<pre><code class="hljs language-js">    <span class="hljs-keyword">const</span> elems = <span class="hljs-title hljs-class">Array</span>.<span class="hljs-title hljs-function">from</span>(<span class="hljs-variable hljs-language">document</span>.<span class="hljs-title hljs-function">querySelectorAll</span>(<span class="hljs-string">&quot;*&quot;</span>))
</code></pre>
<p>Here comes the actual fun part. With <code>window.getComputedStyle(elem)</code>, the browser provides an interface to fetch all css declarations which are applied to the element (including user agent stylesheets, so don&#x27;t wonder, why there are way more values than you expected). We can now access all css properties in three different ways (see below). With <code>.zIndex</code>, we fetch the declartion for the <code>z-index</code> and check if it is not set to <code>auto</code>. <code>auto</code> is the default value from the HTML specification and applied by the browser, so we want to filter all those elements out, where it is still the browser default value.</p>
<pre><code class="hljs language-js">        .<span class="hljs-title hljs-function">filter</span>(<span class="hljs-function"><span class="hljs-params">elem</span> =&gt;</span> <span class="hljs-variable hljs-language">window</span>.<span class="hljs-title hljs-function">getComputedStyle</span>(elem).<span class="hljs-property">zIndex</span> !== <span class="hljs-string">&quot;auto&quot;</span>)
</code></pre>
<p>Now we map over all found elements and create a new object with a reference to the element as well as the style declaration for each element.</p>
<pre><code class="hljs language-js">        .<span class="hljs-title hljs-function">map</span>(<span class="hljs-function"><span class="hljs-params">elem</span> =&gt;</span> {
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">elem</span>: elem,
                <span class="hljs-attr">style</span>: <span class="hljs-variable hljs-language">window</span>.<span class="hljs-title hljs-function">getComputedStyle</span>(elem),
            };
        });
</code></pre>
<p>At last, we can output our results or continue working with them.</p>
<pre><code class="hljs language-js">    <span class="hljs-variable hljs-language">console</span>.<span class="hljs-title hljs-function">table</span>(elems);
</code></pre>
<p>And finally end the function and call it, to make it an IIFE (immediately invoked function espression).</p>
<pre><code class="hljs language-js">})();
</code></pre>
<h2>Output</h2>
<p>If you run this snippet in the console on <a href="https://github.com" target="_blank" rel="noreferrer noopener">https://github.com</a> for example, you will receive an output like that:</p>
<figure>
    <img src="/assets/images/elems_by_css.png" alt="Example output from the console from the snippet, from github.com"/>
    <figcaption class="c-caption">Example output from the console from the snippet, from github.com</figcaption>
</figure>
<h2>window.getComputedStyle</h2>
<p>The function <code>window.getComputedStyle(elem)</code> returns a <code>CSSStyleDeclaration</code>, but how can you actually extract the css property values? There are actually three different ways to do that:</p>
<ul>
<li>via a function <code>getPropertyValue(propName)</code></li>
<li>via index access <code>cs[propName]</code></li>
<li>via property <code>cs.propName</code></li>
</ul>
<blockquote class="c-quote" cite="https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle">&quot;The CSS property values may be accessed using the getPropertyValue(propName) API or by indexing directly into the object such as cs[&#x27;z-index&#x27;] or cs.zIndex.&quot;</blockquote>
<p><strong>Resources</strong></p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle" target="_blank" rel="noreferrer noopener">Window/getComputedStyle on MDN</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleDeclaration" target="_blank" rel="noreferrer noopener">CSSStyleDeclaration on MDN</a></li>
<li><a href="https://gist.github.com/zlypher/0b9b295e2ee39da4125105e88d8d7d3e" target="_blank" rel="noreferrer noopener">Gist with Code Example</a></li>
</ul></div><footer><div class="c-post__share"><a class="c-post__share-link" target="blank" rel="noreferrer noopener" href="https://twitter.com/intent/tweet?text=Find%20elements%20by%20css%20properties%20https://www.tompka.io/posts/find-elements-by-css-property"><span class="u-sr-only">Share via Twitter</span><svg class="c-post__share-icon"><use xlink:href="#icon-twitter"></use></svg></a><a class="c-post__share-link" target="blank" rel="noreferrer noopener" href="https://www.facebook.com/sharer/sharer.php?u=https://www.tompka.io/posts/find-elements-by-css-property&amp;title=Find%20elements%20by%20css%20properties"><span class="u-sr-only">Share via Facebook</span><svg class="c-post__share-icon"><use xlink:href="#icon-facebook"></use></svg></a></div><p class="c-post__info">Please let me know if you have any suggestions or corrections to improve this post. Feedback is always appreciated.</p></footer></article></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"layout":"post","title":"Find elements by css properties","description":"How to find all elements with a specific css property","date":"2018-09-28 20:01:00 +0200","slug":"find-elements-by-css-property","content":"\nToday it like to share short [code snippet](https://gist.github.com/zlypher/0b9b295e2ee39da4125105e88d8d7d3e) with you. You can use it to find all elements with a specific css property value. In my example, I want to find all elements with a custom `z-index`. So let's jump right in. The snippet is pretty straight forward:\n\n```js\n(() =\u003e {\n    const elems = Array.from(document.querySelectorAll(\"*\"))\n        .filter(elem =\u003e window.getComputedStyle(elem).zIndex !== \"auto\")\n        .map(elem =\u003e {\n            return {\n                elem: elem,\n                style: window.getComputedStyle(elem),\n            };\n        });\n    console.table(elems);\n})();\n```\n\n## Explanation\n\nIn the gist, you will find another variations with slightly different tradeoffs. For sake of brevity, we will only consider this one. So let's step through it.\n\nWe create a new function with the nifty arrow syntax. This could easily be written as `(function() {` for older browser though.\n\n```js\n(() =\u003e {\n```\n\nNext up we query all elements which match the `*` selector (hint: all of them). And create an array from the returned `NodeList`.\n\n```js\n    const elems = Array.from(document.querySelectorAll(\"*\"))\n```\n\nHere comes the actual fun part. With `window.getComputedStyle(elem)`, the browser provides an interface to fetch all css declarations which are applied to the element (including user agent stylesheets, so don't wonder, why there are way more values than you expected). We can now access all css properties in three different ways (see below). With `.zIndex`, we fetch the declartion for the `z-index` and check if it is not set to `auto`. `auto` is the default value from the HTML specification and applied by the browser, so we want to filter all those elements out, where it is still the browser default value.\n\n```js\n        .filter(elem =\u003e window.getComputedStyle(elem).zIndex !== \"auto\")\n```\n\nNow we map over all found elements and create a new object with a reference to the element as well as the style declaration for each element.\n\n```js\n        .map(elem =\u003e {\n            return {\n                elem: elem,\n                style: window.getComputedStyle(elem),\n            };\n        });\n```\n\nAt last, we can output our results or continue working with them.\n\n```js\n    console.table(elems);\n```\n\nAnd finally end the function and call it, to make it an IIFE (immediately invoked function espression).\n\n```js\n})();\n```\n\n## Output\n\nIf you run this snippet in the console on [https://github.com](https://github.com) for example, you will receive an output like that:\n\n\u003cfigure\u003e\n    \u003cimg src=\"/assets/images/elems_by_css.png\" alt=\"Example output from the console from the snippet, from github.com\"\u003e\n    \u003cfigcaption class=\"c-caption\"\u003eExample output from the console from the snippet, from github.com\u003c/figcaption\u003e\n\u003c/figure\u003e\n\n## window.getComputedStyle\n\nThe function `window.getComputedStyle(elem)` returns a `CSSStyleDeclaration`, but how can you actually extract the css property values? There are actually three different ways to do that:\n\n* via a function `getPropertyValue(propName)`\n* via index access `cs[propName]`\n* via property `cs.propName`\n\n\u003cblockquote class=\"c-quote\" cite=\"https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle\"\u003e\"The CSS property values may be accessed using the getPropertyValue(propName) API or by indexing directly into the object such as cs['z-index'] or cs.zIndex.\"\u003c/blockquote\u003e\n\n**Resources**\n* [Window/getComputedStyle on MDN](https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle)\n* [CSSStyleDeclaration on MDN](https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleDeclaration)\n* [Gist with Code Example](https://gist.github.com/zlypher/0b9b295e2ee39da4125105e88d8d7d3e)","url":"https://www.tompka.io/posts/find-elements-by-css-property"}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"find-elements-by-css-property"},"buildId":"ipGrjwLbH_hDOF3cBijO5","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>