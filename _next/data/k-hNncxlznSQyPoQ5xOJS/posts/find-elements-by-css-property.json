{"pageProps":{"post":{"layout":"post","title":"Find elements by css properties","description":"How to find all elements with a specific css property","date":"2018-09-28 20:01:00 +0200","slug":"find-elements-by-css-property","content":"\nToday it like to share short [code snippet](https://gist.github.com/zlypher/0b9b295e2ee39da4125105e88d8d7d3e) with you. You can use it to find all elements with a specific css property value. In my example, I want to find all elements with a custom `z-index`. So let's jump right in. The snippet is pretty straight forward:\n\n```js\n(() => {\n    const elems = Array.from(document.querySelectorAll(\"*\"))\n        .filter(elem => window.getComputedStyle(elem).zIndex !== \"auto\")\n        .map(elem => {\n            return {\n                elem: elem,\n                style: window.getComputedStyle(elem),\n            };\n        });\n    console.table(elems);\n})();\n```\n\n## Explanation\n\nIn the gist, you will find another variations with slightly different tradeoffs. For sake of brevity, we will only consider this one. So let's step through it.\n\nWe create a new function with the nifty arrow syntax. This could easily be written as `(function() {` for older browser though.\n\n```js\n(() => {\n```\n\nNext up we query all elements which match the `*` selector (hint: all of them). And create an array from the returned `NodeList`.\n\n```js\n    const elems = Array.from(document.querySelectorAll(\"*\"))\n```\n\nHere comes the actual fun part. With `window.getComputedStyle(elem)`, the browser provides an interface to fetch all css declarations which are applied to the element (including user agent stylesheets, so don't wonder, why there are way more values than you expected). We can now access all css properties in three different ways (see below). With `.zIndex`, we fetch the declartion for the `z-index` and check if it is not set to `auto`. `auto` is the default value from the HTML specification and applied by the browser, so we want to filter all those elements out, where it is still the browser default value.\n\n```js\n        .filter(elem => window.getComputedStyle(elem).zIndex !== \"auto\")\n```\n\nNow we map over all found elements and create a new object with a reference to the element as well as the style declaration for each element.\n\n```js\n        .map(elem => {\n            return {\n                elem: elem,\n                style: window.getComputedStyle(elem),\n            };\n        });\n```\n\nAt last, we can output our results or continue working with them.\n\n```js\n    console.table(elems);\n```\n\nAnd finally end the function and call it, to make it an IIFE (immediately invoked function espression).\n\n```js\n})();\n```\n\n## Output\n\nIf you run this snippet in the console on [https://github.com](https://github.com) for example, you will receive an output like that:\n\n<figure>\n    <img src=\"/assets/images/elems_by_css.png\" alt=\"Example output from the console from the snippet, from github.com\">\n    <figcaption class=\"c-caption\">Example output from the console from the snippet, from github.com</figcaption>\n</figure>\n\n## window.getComputedStyle\n\nThe function `window.getComputedStyle(elem)` returns a `CSSStyleDeclaration`, but how can you actually extract the css property values? There are actually three different ways to do that:\n\n* via a function `getPropertyValue(propName)`\n* via index access `cs[propName]`\n* via property `cs.propName`\n\n<blockquote class=\"c-quote\" cite=\"https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle\">\"The CSS property values may be accessed using the getPropertyValue(propName) API or by indexing directly into the object such as cs['z-index'] or cs.zIndex.\"</blockquote>\n\n**Resources**\n* [Window/getComputedStyle on MDN](https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle)\n* [CSSStyleDeclaration on MDN](https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleDeclaration)\n* [Gist with Code Example](https://gist.github.com/zlypher/0b9b295e2ee39da4125105e88d8d7d3e)","url":"https://www.tompka.io/posts/find-elements-by-css-property"}},"__N_SSG":true}